<svg viewBox="0 0 1000 900" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#333" />
    </marker>
    <marker id="optical-arrow" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#ff6b6b" />
    </marker>
    <style>
      .power-supply { fill: #fce4ec; stroke: #c2185b; stroke-width: 2; }
      .adapter { fill: #fff9c4; stroke: #f57f17; stroke-width: 2; }
      .terminal { fill: #fff9c4; stroke: #f57f17; stroke-width: 2; }
      .arduino { fill: #fff3e0; stroke: #f57c00; stroke-width: 2; }
      .relay { fill: #e8f5e9; stroke: #388e3c; stroke-width: 2; }
      .laser { fill: #f3e5f5; stroke: #7b1fa2; stroke-width: 2; }
      .optical { fill: #e1f5fe; stroke: #0288d1; stroke-width: 2; }
      .text { font-family: Arial, sans-serif; font-size: 11px; fill: #333; }
      .title { font-family: Arial, sans-serif; font-size: 13px; font-weight: bold; fill: #333; }
      .label { font-family: Arial, sans-serif; font-size: 9px; fill: #666; }
      .power-line { stroke: #c2185b; stroke-width: 3; marker-end: url(#arrowhead); }
      .control-line { stroke: #1976d2; stroke-width: 2; marker-end: url(#arrowhead); }
      .optical-line { stroke: #ff6b6b; stroke-width: 2.5; marker-end: url(#optical-arrow); }
      .ground { stroke: #333; stroke-width: 2; stroke-dasharray: 5,5; }
    </style>
  </defs>
  
  <!-- Title -->
  <text x="500" y="25" class="title" text-anchor="middle" font-size="18">Complete Optical System Block Diagram</text>
  
  <!-- Mains power -->
  <rect x="400" y="50" width="200" height="40" fill="#fff" stroke="#c2185b" stroke-width="2" rx="3"/>
  <text x="500" y="75" class="title" text-anchor="middle">240V AC Mains</text>
  
  <!-- Arrow down -->
  <line x1="500" y1="90" x2="500" y2="120" class="power-line"/>
  
  <!-- 5V Plugpack -->
  <rect x="400" y="120" width="200" height="60" class="power-supply" rx="5"/>
  <text x="500" y="140" class="title" text-anchor="middle">5V DC 4A Plugpack</text>
  <text x="500" y="160" class="text" text-anchor="middle">(Switchmode PSU)</text>
  <text x="500" y="175" class="label" text-anchor="middle">2.1mm DC jack output</text>
  
  <!-- Arrow down -->
  <line x1="500" y1="180" x2="500" y2="210" class="power-line"/>
  
  <!-- DC Barrel Jack Adapter -->
  <rect x="400" y="210" width="200" height="50" class="adapter" rx="5"/>
  <text x="500" y="230" class="title" text-anchor="middle">DC Barrel Jack Adapter</text>
  <text x="500" y="247" class="text" text-anchor="middle">(Female, screw terminals)</text>
  
  <!-- Arrow down -->
  <line x1="500" y1="260" x2="500" y2="290" class="power-line"/>
  
  <!-- DIN Rail Terminal Block -->
  <rect x="400" y="290" width="200" height="60" class="terminal" rx="5"/>
  <text x="500" y="310" class="title" text-anchor="middle">DIN Rail Terminal Block</text>
  <text x="500" y="327" class="text" text-anchor="middle">(2 input / 8 output)</text>
  <text x="500" y="342" class="label" text-anchor="middle">Power distribution</text>
  
  <!-- Split to Arduino and Relays -->
  <line x1="400" y1="350" x2="250" y2="380" class="power-line"/>
  <line x1="600" y1="350" x2="750" y2="380" class="power-line"/>
  <text x="310" y="370" class="label">5V</text>
  <text x="680" y="370" class="label">5V</text>
  
  <!-- Arduino UNO R4 -->
  <rect x="50" y="380" width="200" height="100" class="arduino" rx="5"/>
  <text x="150" y="405" class="title" text-anchor="middle">Arduino UNO R4</text>
  <text x="150" y="422" class="title" text-anchor="middle">Minima</text>
  <text x="60" y="445" class="text">USB ↔ PC</text>
  <text x="60" y="462" class="text">Pin 8 (red) → IN1</text>
  <text x="160" y="445" class="text">5V → VCC</text>
  <text x="60" y="475" class="text">Pin 9 (blue) → IN2</text>
  <text x="160" y="462" class="text">GND ↔ GND</text>
  
  <!-- Relay Module -->
  <rect x="650" y="380" width="200" height="100" class="relay" rx="5"/>
  <text x="750" y="405" class="title" text-anchor="middle">Relay Module</text>
  <text x="750" y="422" class="text" text-anchor="middle">(4 channels, 5V)</text>
  <text x="660" y="445" class="text">VCC ← 5V</text>
  <text x="660" y="462" class="text">IN1, IN2, IN3</text>
  <text x="660" y="475" class="text">GND</text>
  
  <!-- Control lines from Arduino to Relay -->
  <path d="M 250 430 Q 450 430 650 420" class="control-line" fill="none"/>
  <text x="450" y="420" class="label" text-anchor="middle">Control signals</text>
  
  <!-- Switched power outputs from relays -->
  <line x1="750" y1="480" x2="750" y2="520" class="power-line"/>
  <text x="760" y="505" class="label">Switched</text>
  <text x="760" y="515" class="label">5V</text>
  
  <!-- Three laser branches -->
  <line x1="750" y1="520" x2="350" y2="560" class="power-line"/>
  <line x1="750" y1="520" x2="750" y2="560" class="power-line"/>
  <line x1="750" y1="520" x2="850" y2="560" class="power-line"/>
  
  <!-- Laser 1 (1064nm) -->
  <rect x="250" y="560" width="200" height="90" class="laser" rx="5"/>
  <text x="350" y="585" class="title" text-anchor="middle">Laser 1</text>
  <text x="350" y="602" class="text" text-anchor="middle">1064nm, 10mW</text>
  <text x="350" y="617" class="label" text-anchor="middle">Pigtailed, SM fibre</text>
  <text x="350" y="632" class="label" text-anchor="middle">via DC barrel jack</text>
  <text x="350" y="645" class="label" text-anchor="middle">(pin 8, red wire)</text>
  
  <!-- Laser 2 (1310nm) -->
  <rect x="650" y="560" width="200" height="90" class="laser" rx="5"/>
  <text x="750" y="585" class="title" text-anchor="middle">Laser 2</text>
  <text x="750" y="602" class="text" text-anchor="middle">1310nm, 10mW</text>
  <text x="750" y="617" class="label" text-anchor="middle">Pigtailed, SM fibre</text>
  <text x="750" y="632" class="label" text-anchor="middle">via DC barrel jack</text>
  <text x="750" y="645" class="label" text-anchor="middle">(pin 9, blue wire)</text>
  
  <!-- Laser 3 (1550nm) - shown to the right -->
  <rect x="50" y="700" width="200" height="90" class="laser" rx="5"/>
  <text x="150" y="725" class="title" text-anchor="middle">Laser 3</text>
  <text x="150" y="742" class="text" text-anchor="middle">1550nm, 10mW</text>
  <text x="150" y="757" class="label" text-anchor="middle">Pigtailed, SM fibre</text>
  <text x="150" y="772" class="label" text-anchor="middle">via DC barrel jack</text>
  <text x="150" y="785" class="label" text-anchor="middle">(pin 10, green wire)</text>
  
  <!-- Arrow from third branch down -->
  <line x1="850" y1="560" x2="150" y2="700" class="power-line"/>
  
  <!-- Optical path for Laser 1 -->
  <line x1="350" y1="650" x2="350" y2="690" class="optical-line"/>
  <rect x="280" y="690" width="140" height="50" class="optical" rx="5"/>
  <text x="350" y="710" class="title" text-anchor="middle">Isolator</text>
  <text x="350" y="725" class="label" text-anchor="middle">1064nm, SM</text>
  
  <line x1="350" y1="740" x2="350" y2="780" class="optical-line"/>
  <rect x="280" y="780" width="140" height="70" class="optical" rx="5"/>
  <text x="350" y="800" class="title" text-anchor="middle">90:10 Coupler</text>
  <line x1="350" y1="815" x2="420" y2="840" class="optical-line"/>
  <text x="430" y="845" class="label">90% → Output</text>
  <line x1="350" y1="815" x2="280" y2="840" class="optical-line"/>
  <text x="200" y="845" class="label">10% → Tap/Monitor</text>
  
  <!-- Optical path for Laser 2 -->
  <line x1="750" y1="650" x2="750" y2="690" class="optical-line"/>
  <rect x="680" y="690" width="140" height="50" class="optical" rx="5"/>
  <text x="750" y="710" class="title" text-anchor="middle">Isolator</text>
  <text x="750" y="725" class="label" text-anchor="middle">1310nm, SM</text>
  
  <line x1="750" y1="740" x2="750" y2="780" class="optical-line"/>
  <rect x="680" y="780" width="140" height="70" class="optical" rx="5"/>
  <text x="750" y="800" class="title" text-anchor="middle">90:10 Coupler</text>
  <line x1="750" y1="815" x2="820" y2="840" class="optical-line"/>
  <text x="830" y="845" class="label">90% → Output</text>
  <line x1="750" y1="815" x2="680" y2="840" class="optical-line"/>
  <text x="600" y="845" class="label">10% → Tap/Monitor</text>
  
  <!-- Optical path for Laser 3 -->
  <line x1="250" y1="745" x2="480" y2="745" class="optical-line"/>
  <rect x="480" y="710" width="140" height="50" class="optical" rx="5"/>
  <text x="550" y="730" class="title" text-anchor="middle">Isolator</text>
  <text x="550" y="745" class="label" text-anchor="middle">1550nm, SM</text>
  
  <line x1="620" y1="735" x2="660" y2="735" class="optical-line"/>
  <rect x="660" y="700" width="140" height="70" class="optical" rx="5"/>
  <text x="730" y="720" class="title" text-anchor="middle">90:10 Coupler</text>
  <line x1="730" y1="735" x2="800" y2="760" class="optical-line"/>
  <text x="810" y="765" class="label">90% → Output</text>
  <line x1="730" y1="735" x2="800" y2="710" class="optical-line"/>
  <text x="810" y="705" class="label">10% → Tap</text>
  
  <!-- Legend -->
  <rect x="50" y="820" width="200" height="70" fill="white" stroke="#333" stroke-width="1" rx="3"/>
  <text x="150" y="840" class="title" text-anchor="middle">Legend</text>
  <line x1="60" y1="855" x2="100" y2="855" class="power-line"/>
  <text x="110" y="858" class="label">Power (5V DC)</text>
  <line x1="60" y1="870" x2="100" y2="870" class="control-line"/>
  <text x="110" y="873" class="label">Control signals</text>
  <line x1="60" y1="885" x2="100" y2="885" class="optical-line"/>
  <text x="110" y="888" class="label">Optical path</text>
  
</svg>